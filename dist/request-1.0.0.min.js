/**
* Abstract class to http requests, connections and responses
*
* @class Http
* @constructor
*/
function request(){var a=require("./jsonp_request").JsonpRequest,b=require("./img_request").ImgRequest;return{jsonp:a.make,get:a.make,img:b.make}}var Http=function(){function c(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0}var a=require("../domain/core").Core,b=require("../node_modules/querystring").querystring;a.apply(this,arguments),this.host="",this.protocol="http",this.port=80,this.path="",this.qs={},this.query="",this.url="",this.getUrl=function(){return this.url||(this.url=this.protocol,this.url+="://",this.url+=this.host,this.url+=this.path,c(this.qs)||(this.query=[this.query,b.stringify(this.qs)].join("&")),this.query&&(this.url+="?"+this.query)),this.url}};exports.Http=Http;var HttpRequest=function(a,b){var c=require("./http").Http;c.apply(this,arguments),this.callback=undefined;var d=function(c){typeof a=="string"?c.url=a:c=c.extend(a),c.callback=b||c.callback}(this)};exports.HttpRequest=HttpRequest;var ImgRequest=function(){var a=require("./http_request").HttpRequest;a.apply(this,arguments)};ImgRequest.prototype.send=function(a){a&&(this.qs=a);var b=this.document||b,c=b.createElement("img");return c.src=this.getUrl(),this.callback&&(c.onload=this.callback.apply({ok:!0})),this},ImgRequest.make=function(a,b,c){var d=new ImgRequest(a,b);return c&&(d.document=c),d.send(),d},exports.ImgRequest=ImgRequest;var JsonpRequest=function(){var a=require("./http_request").HttpRequest;a.apply(this,arguments)};JsonpRequest.prototype.queryCallback=function(a){return this.qs.callback=a,this},JsonpRequest.prototype.validate=function(){return this.qs.callback!==undefined},JsonpRequest.prototype.send=function(a){function b(a,b){var c=b.createElement("script");return c.type="text/javascript",c.src=a,b.getElementsByTagName("head")[0].appendChild(c),c}return a&&(this.qs=a),b(this.getUrl(),JsonpRequest.document||document),this},JsonpRequest.document=undefined,JsonpRequest.make=function(a,b){function c(a){function b(b){b?a(null,b):a(new Error("No Response"),null)}return b}var d=new JsonpRequest(a,c(b));return d.send(),d},exports.JsonpRequest=JsonpRequest,exports.request=request